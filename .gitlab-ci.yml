test:1.26:
  script: &test_script
  - &print_version rustc --version && cargo --version
  - cargo test --all --verbose
  - cd enum-map
  - cargo test --all-features --verbose
  image: liuchong/rustup:1.26.0

test:stable:
  script: *test_script
  image: liuchong/rustup:stable

test:beta:
  script: *test_script
  image: liuchong/rustup:beta

test:nightly:
  script: *test_script
  image: liuchong/rustup:nightly

clippy:
  script:
  - *print_version
  - rustup component add clippy-preview
  - cargo clippy --verbose
  image: rustlang/rust:nightly

rustfmt:
  script:
  - *print_version
  - rustup component add rustfmt-preview
  - cargo fmt -- --check
  image: rustlang/rust:nightly
